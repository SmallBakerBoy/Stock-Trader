{% extends 'base.html' %}

{% block title %} Account {% endblock %}

{% block body %} 

<h1>Account</h1>
<div class='accounts-grid'>
    <div class='larger_container'>
        <h1>Your Account Information</h1>
        <ul style='width:100%;'>
            <li><p> Username : {{user.username}}</p></li>
            <li><p> Email : {{user.email}}</p></li>
        </ul>
        <form method='POST' class='form'>
            {% csrf_token %}
            <ul>
                <li class='info_item'>
                    <p> Portfolio Acceptable Risk: </p>
                    <input type='range' class='slider' id='slider' min=0 max=100 value={{user.risk_level}} name='risk_level'>
                    <p id='slider-output'></p>
                </li>
                <li class='info_item'><p>Ideal Market Portfolio</p><input type='checkbox' class='checkbox' onclick='toggle_slider()' name='ideal'></li>
            </ul>
        <button type="submit" class="submit" name='AccountInfo'>Update Information</button>
        </form>
    </div>
    <div class='larger_container'>
        <h1>Your Blacklist</h1>
        <div>
            <ul>
            {% for company in blacklisted %}
                <li>{{company.ticker}}</li>
            {% endfor %}
            </ul>
            <h3>Add new company</h3>
            <form method='POST' class='form'>
                {% csrf_token %}
                {{ form.ticker.label_tag }}
                {{ form.ticker }}
                {{ form.ticker.errors }}
                <button type="submit" class="submit" name='Blacklist'>Submit</button>
            </form>
        </div>
    </div>
</div>

<script>
    var slider = document.getElementById('slider')
    var output = document.getElementById('slider-output')
    output.innerHTML = slider.value

    slider.oninput =  function() {
        output.innerHTML = this.value
    }

    function toggle_slider() {
        if (slider.disabled) {
            slider.disabled = false
        }
        else{
            slider.disabled = true
        }
    }

</script>

{% endblock %}

